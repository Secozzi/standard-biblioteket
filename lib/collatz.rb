def collatz(n)
    return n<2?0:1+collatz(n*3/(6-5*w=n%2)+w)
end

p collatz(123)